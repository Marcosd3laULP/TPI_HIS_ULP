block content
  h1 Internación de Emergencia

  // Mostrar mensaje de error si existe
  if error
    p(style="color:red; font-weight:bold;") #{error}

  // Datos del paciente
  if paciente
    h2 Datos del Paciente
    p ID: #{paciente.ID_paciente}
    p Nombre: #{paciente.Nombre}
    p Apellido: #{paciente.Apellido}
    p Sexo: #{paciente.Sexo}
  else
    p No se encontraron datos del paciente.

  hr

  h2 Alojamientos disponibles en Emergencia

  if alas && alas.length
    each ala in alas
      h3 Ala #{ala.Sector} (ID: #{ala.ID_ala})

      if ala.habitaciones && ala.habitaciones.length
        each hab in ala.habitaciones
          h4 Habitación Nº #{hab.numero} (ID: #{hab.ID_hab})
          p Capacidad: #{hab.capacidad}

          if hab.camas && hab.camas.length
            ul
              each cama in hab.camas
                li
                  | Cama #{cama.Numero} - Estado: #{cama.Estado} - 
                  | Sexo ocupante: #{cama.Sexo_ocupante || 'N/A'} (ID: #{cama.ID_cama})

                  // Si la cama está libre mostramos el formulario para internar
                  if cama.Estado === 'Libre'
                    form.form-internar(method="POST", action="/pacientes/internaciones/realizarInternacionDeEmergencia", style="margin-top:5px;")
                      input(type="hidden", name="_csrf", value=csrfToken)
                      input(type="hidden", name="idCama", value=cama.ID_cama)
                      input(type="hidden", name="idPaciente", value=paciente ? paciente.ID_paciente : '')
                      input(type="hidden", name="sexoPaciente", value=paciente ? paciente.Sexo : '')
                      
                      label(for="motivo") Motivo:
                      input(type="text", name="motivo", required)

                      button(type="submit", style="margin-left:10px;") Internar
                  else
                    strong(style="color:red; margin-left:10px;") ← Cama ocupada
          else
            p No hay camas registradas en esta habitación.
      else
        p No hay habitaciones registradas en esta ala.

      hr
  else
    p No se encontraron alas de emergencia registradas.

  // Token CSRF (por si luego agregás más formularios globales)
  input(type="hidden", name="_csrf", value=csrfToken)
