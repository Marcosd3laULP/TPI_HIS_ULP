extends ../utilitario/layout

block content
  body.bg-sky-100.min-h-screen
    include ../utilitario/navRecepcion.pug

    //- Botón Volver
    div.px-8.mt-6.mb-4
      a(href="/pacientes/lista-pacientes" class="inline-block bg-red-500 text-white font-bold px-4 py-2 rounded hover:bg-red-600 transition") Volver

    h1.text-2xl.font-bold.text-center.my-6 Normalización de Paciente

    //- Mensaje de resultado de búsqueda
    if mensaje
      p.text-blue-600.font-bold.text-center.mb-4= mensaje

    //- Formulario para buscar paciente por DNI
    div.flex.justify-center
      form(method="POST", action="/pacientes/internaciones/normalizar/buscar" class="bg-white p-6 rounded-lg shadow-md flex flex-col items-center gap-4 w-full max-w-md")
        input(type="hidden", name="_csrf", value=csrfToken)
        input(type="hidden", name="idPacienteEmergencia", value=idPacienteEmergencia)

        label(for="dni" class="font-semibold") DNI del paciente:
        input(type="text" name="dni" required class="border px-2 py-1 rounded w-full")
        button(type="submit" class="bg-blue-600 text-white px-4 py-1 rounded hover:bg-blue-700 transition") Buscar

        //- Contenedor de botones que solo aparece después de la búsqueda
        if mensaje && idPacienteEmergencia
          div.flex.flex-col.items-center.gap-4.mt-4.w-full
            if idPacienteNormal
              button(type="submit" formaction="/pacientes/internaciones/normalizar/guardar")

              a(href=`/pacientes/internaciones/confirmar/${idPacienteNormal}/${idPacienteEmergencia}`
                class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition w-full text-center") Confirmar normalización
            else
              a(href=`/pacientes/internaciones/registroAnonimo/${idPacienteEmergencia}`
                class="bg-red-600 text-white px-6 py-2 rounded hover:bg-red-700 transition w-full text-center") Registrar paciente anónimo
