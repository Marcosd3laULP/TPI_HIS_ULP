block content

  a(href="/prestador/medicos") Volver

  div
    h3 Evaluación Médica
    p ID de Evaluación: #{evaluacion.IDMedEva}

  form(action="/medicos/guardarPedido" method="POST")
    
    // CSRF token
    input(type="hidden" name="_csrf" value=csrfToken)

    // Campo oculto obligatorio
    input(type="hidden" name="IDMedEva" value=evaluacion.IDMedEva)

    div
      label(for="medicoSelect") Seleccione un médico:
      select#medicoSelect(name="ID_Profesional" required)
        option(value="") -- Seleccione un médico --
        each med in medicos
          option(value=med.ID_Profesional)= `${med.Nombre} ${med.Apellido} (ID: ${med.ID_Profesional})`

    div
      label
        input(type="radio" name="busquedaMedico" value="id")
        | Buscar por ID
      label
        input(type="radio" name="busquedaMedico" value="nombre")
        | Buscar por Nombre

    h4 Nuevo Pedido de Estudio

    div
      label(for="Prioridad") Prioridad:
      select(name="Prioridad" required)
        option(value="") Seleccione...
        option(value="Urgente") Urgente
        option(value="Particular") Particular

    div
      label(for="ID_tipoEstudio") Tipo de Estudio:
      select(name="ID_tipoEstudio" required)
        option(value="") Seleccione...
        each tipo in tiposEstudios
          option(value=tipo.ID_tipoEstudio)= tipo.Nombre

    div
      label(for="Indicaciones") Indicaciones:
      input(type="text" name="Indicaciones" placeholder="Notas para el estudio...")

    button(type="submit") Crear Pedido

script.
  document.addEventListener("DOMContentLoaded", () => {
    const medicoSelect = document.getElementById("medicoSelect");
    const radioButtons = document.querySelectorAll("input[name='busquedaMedico']");

    radioButtons.forEach(rb => {
      rb.addEventListener("change", () => {
        console.log("Modo:", rb.value);
      });
    });

    medicoSelect.addEventListener("change", () => {
      console.log("Médico seleccionado:", medicoSelect.value);
    });
  });
